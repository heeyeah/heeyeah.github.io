---
layout: post
title:  "SSL? 인증서?"
date:   '2019-03-07 23:47:00'
author: Heeye
categories: Basic
tags: basic security
---

SSL? 인증서?
웹 페이지를 만들다 보면, http와 https의 차이점을 항상 접하게 된다. http는 프로토콜을 지칭하는 것이지만 https는 http보다는 조금 더 보안이 좋은(?) 프로토콜이라고 인지하고 있다.

그럼 대체 https라는 프로토콜을 사용하게 됐을 때, 왜 인증서란 게 필요하고 암호화/복호화에 대한 이해가 필요한 것일까? https를 먼저 접해서 역방향으로 공부를 하는 것 같지만 아무렴 상관없지👻

##### 암호화
암호화에는 공개키 암호화 방법, 개인키 암호화 방법 등.... 같은 게 존재한다. 대칭키, 개인키 암호화 방법이라고 말할 수 있지. 대표적으로 대칭키 암호화 방법에는 RSA가 존재한다. 대칭키 암호화 방법은 literally 암호화하고 복호화할 때 동일한 키를 사용한다는 개념이다.
 그러면 개인키는? 암호화한 걸 풀고 싶으면 private key를 너가 알아야지? 라는 개념이다. 같은 키로 암복호화를 동시에 할 수 없다는 말이기도 하다.

이 개념이 어떻게 SSL과 연결되고, 인증서와 연결이 될까? 를 생각해봐야 한다.


## 잘모르겠음, 물어보고 정리할 것
일단, client가 요청할 떄, 자기가 주는 정보를 남한테 알려주고 싶지 않을 수 있겠지? 대부분 보안이 그러니까? 그러면 client가 어떤 키로 자신의 데이터를 암호화해서 보낼거다. 암호화할 때 CA인증된 애로 보내겠지. 인증서가 신뢰할 수 있어야 하니까?

보내면, server는 암호화된 데이터를 풀어야할 것 아닌가? 풀어야 하는데 key가 없어요. key를 알 수 있는 방법은 같은 key를 이용하거나 private key를 둘 다 알고 있는 것인데, 공개키를 사용하겠다 이거지. 그래서 공개키를 사용해서 request를 읽고 response를 줘요. 대신 client가 믿을 수 있어야 하니까 인증서를 같이 보내줘.

그럼 client가 답을 받을 건데, 그것도 암호화가 돼있을 거 아니에요? 근데 client(browser)는 자기들이 들고 있는 인증서 목록이 있어요. 이 목록에 있으면, 얘는 신뢰할 수 있는 정보구나 라는 걸 판단할 수 있단 말이지(CA).



SSL(Secure Socket Layer) 프로토콜은 처음에 Netscape사에서 웹서버와 브라우저 사이의 보안을 위해 만들었다. SSL은 Certificate Authority(CA)라 불리는 서드 파티로부터 서버와 클라이언트의 인증을 하는데 사용된다. 아래는 SSL이 어떻게 작동하는지에 대한 간단한 과정을 설명한 것이다.

[웹브라우저] SSL로 암호화된 페이지를 요청하게 된다. (일반적으로 https://가 사용된다)

[웹서버] Public Key를 인증서와 함께 전송한다.

[웹브라우저] 인증서가 자신이 신용있다고 판단한 CA(일반적으로 trusted root CA라고 불림)로부터 서명된 것인지 확인한다. (역주:Internet Explorer나 Netscape와 같은 웹브라우저에는 이미 Verisign, Thawte와 같은 널리 알려진 root CA의 인증서가 설치되어 있다) 또한 날짜가 유효한지, 그리고 인증서가 접속하려는 사이트와 관련되어 있는지 확인한다.

[웹브라우저] Public Key를 사용해서 랜덤 대칭 암호화키(Random symmetric encryption key)를 비릇한 URL, http 데이터들을 암호화해서 전송한다.

[웹서버] Private Key를 이용해서 랜덤 대칭 암호화키와 URL, http 데이터를 복호화한다.

[웹서버] 요청받은 URL에 대한 응답을 웹브라우저로부터 받은 랜덤 대칭 암호화키를 이용하여 암호화해서 브라우저로 전송한다.

[웹브라우저] 대칭 키를 이용해서 http 데이터와 html문서를 복호화하고, 화면에 정보를 뿌려준다.

여기서 간단한 개념 정도는 알아두어야 할 것이다.

{"componentChunkName":"component---src-templates-blog-post-js","path":"/seminar/2019-04-27-spring-camp-2019-session4/","result":{"data":{"site":{"siteMetadata":{"title":"Heeye Blog","author":"heeye","siteUrl":"https://heeyeah.github.io","comment":{"disqusShortName":"","utterances":"heeyeah/heeyeah.github.io"},"sponsor":{"buyMeACoffeeId":"heeyeah"}}},"markdownRemark":{"id":"c6a39ba2-7cf6-5c52-bcc5-a34c78b0a5fa","excerpt":"테스트로 얻을 수 있는 것 안정감과 자신감!😌\n현재와 미래의 나! 현재와 미래의 동료를 위해!\n 무엇을 테스트할 것인가? 로또를 구현하라 6개의 숫자를 반환 중복되지 않은 숫자 랜덤하게 반환 구현 vs 설계\n구현은 언젠가 어떻게든 변할 수 있다.\n그렇기 때문에, 설계를 기준으로 테스트코드를 짜야 한다. 구현 테스트\npublic A actA() - void actATest()\npublic B actB() - void actBTest()\nprivate C actC…","html":"<h2 id=\"테스트로-얻을-수-있는-것\" style=\"position:relative;\"><a href=\"#%ED%85%8C%EC%8A%A4%ED%8A%B8%EB%A1%9C-%EC%96%BB%EC%9D%84-%EC%88%98-%EC%9E%88%EB%8A%94-%EA%B2%83\" aria-label=\"테스트로 얻을 수 있는 것 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>테스트로 얻을 수 있는 것</h2>\n<p>안정감과 자신감!😌\n현재와 미래의 나! 현재와 미래의 동료를 위해!\n<br/></p>\n<h2 id=\"무엇을-테스트할-것인가\" style=\"position:relative;\"><a href=\"#%EB%AC%B4%EC%97%87%EC%9D%84-%ED%85%8C%EC%8A%A4%ED%8A%B8%ED%95%A0-%EA%B2%83%EC%9D%B8%EA%B0%80\" aria-label=\"무엇을 테스트할 것인가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>무엇을 테스트할 것인가?</h2>\n<ul>\n<li>\n<p>로또를 구현하라</p>\n<ul>\n<li>6개의 숫자를 반환</li>\n<li>중복되지 않은 숫자</li>\n<li>랜덤하게 반환</li>\n</ul>\n</li>\n<li>\n<p>구현 vs 설계\n구현은 언젠가 어떻게든 변할 수 있다.\n그렇기 때문에, 설계를 기준으로 테스트코드를 짜야 한다.</p>\n<ul>\n<li>구현 테스트\npublic A actA() - void actATest()\npublic B actB() - void actBTest()\nprivate C actC() - ????</li>\n</ul>\n<blockquote>\n<p>구현을 테스트하는 게 아니라, 설계를 테스트해야 한다. (중복되지 않은 숫자도 테스트 해야지!)</p>\n</blockquote>\n</li>\n<li>테스트 가능한 것, 불가능한 것</li>\n<li>\n<p>Non-Testable!</p>\n<ul>\n<li>Random, Shuffle, LocalDate.now()</li>\n<li>\n<p>외부세계</p>\n<ul>\n<li>HTTP</li>\n<li>외부 저장소</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>제어할 수 없는 영역은 멱등한 결과를 보장할 수 없다. (랜덤하게 반환)\n그럼 <del>랜덤하게 반환</del> 이 아니라, 의도한 전략대로 반환! 이라고 재정의</p>\n</blockquote>\n</li>\n</ul>\n<p><strong>항상 성공할 수 있는 것, 항상 동일한 결과가 나올 수 있는 것을 테스트</strong></p>\n<br/>\n<h2 id=\"어떻게-테스트할-것인가\" style=\"position:relative;\"><a href=\"#%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%85%8C%EC%8A%A4%ED%8A%B8%ED%95%A0-%EA%B2%83%EC%9D%B8%EA%B0%80\" aria-label=\"어떻게 테스트할 것인가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>어떻게 테스트할 것인가?</h2>\n<ol>\n<li>\n<p>테스트할 수 없는 영역을 어떻게?\n테스트할 수 없는 영역이 method call tree 하위에 있을 때, 이를 분리해서 끌어올려야 함(boundary layer까지).\n<del>현재 시간에 해당하는 할인 금액 합산</del> -> 특정 시간에 해당하는 할인 금액 합산\nboundary layer는 한 모듈로서의 의미를 지니는 가장 바깥 쪽!</p>\n<blockquote>\n<p>테스트 불가능한 영역을 boundary Layer로 올려서 테스트 가능하도록 변경</p>\n</blockquote>\n</li>\n<li>Java, Spring Framework</li>\n<li>로또를 웹으로 구현하라! 라는 요구조건으로 업데이트 됐다.</li>\n<li>웹구현에 SpringBoot를 썼다고 @SpringBootTest 를 꼭 써야할까? spring context가 필요할까?</li>\n<li>Spring Context는 느리다 -> 빠른 피드백을 받을 수 없다.</li>\n<li>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Autowired</span>\n<span class=\"token keyword\">private</span> <span class=\"token class-name\">ShuffleStrategy</span> shuffleStrategy<span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>Spring Framework에서 이 필드의 의미는? 필수 의존성</li>\n<li>\n<p>Java에서 이 필드의 의미는? Nullable</p>\n<blockquote>\n<p>Spring Context의 오용은 언어의 본질을 망각할 수 있다.</p>\n</blockquote>\n</li>\n</ul>\n</li>\n</ol>\n<blockquote>\n<p>Context, Framework 에 의존적이지 않은 테스트를 하자.</p>\n</blockquote>\n<ol start=\"3\">\n<li>Test Double</li>\n<li>테스트할 수 없는 영역에 대한 외부 요인을 부여할 수 있또록 도와줌. ex) mockito</li>\n<li>무엇을 Test Double로 처리해야 할까?</li>\n<li>\n<p>Test Double을 사용하는 것은 테스트가 구현을 알아야 한다는 것이다. (테스트 더블이 아마 어떤 고정값을 리턴하게 해서 신경쓰지 않게 해놓는 것 같음)</p>\n<blockquote>\n<p>Boundary Context까지 끌어올려진 Non-Testable한 것만 Test Double처리</p>\n</blockquote>\n</li>\n<li>Embedded</li>\n<li>\n<p>순수 자바 어플리케이션으로는 테스트할 수 없는 것</p>\n<ul>\n<li>저장소 입출력 검증</li>\n<li>SPEC 검증</li>\n<li>내부 Controller</li>\n<li>\n<p>외부 API</p>\n<blockquote>\n<p>Embedded 사용!</p>\n</blockquote>\n</li>\n</ul>\n</li>\n</ol>\n<p>테스트 정확도 Local > Embedded\n테스트 피드백 속도 Local &#x3C; Embedded\n테스트 안정성 Local &#x3C; Embedded</p>\n<ol start=\"5\">\n<li>Endpoint Test 도구 사용하여 내부 API Spec 테스트</li>\n<li>\n<p>Spring Framework Test</p>\n<ul>\n<li>MockMvc</li>\n<li>REST Assured</li>\n<li>WebTestClient</li>\n</ul>\n</li>\n</ol>\n<p>테스트의 목적은 요청과 응답 스펙 검증만으로 제한하는 게 정신 건강에 좋을 것이라고 생각!\n요청 -> @Controller -> @MockBean -> 응답</p>\n<p>by 이호진 - 우아한형제들 기술블로그</p>\n<ol start=\"6\">\n<li>Spring Cloud Contract로 외부 API Spec 테스트</li>\n</ol>\n<h2 id=\"tip--rule\" style=\"position:relative;\"><a href=\"#tip--rule\" aria-label=\"tip  rule permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tip &#x26; Rule</h2>\n<ol>\n<li>테스트는 상호 독립적으로 작성\n모든 테스트의 순서와 관계를 생각하며 테스트를 작성하기 어려움\n공유되는 자원은 초기화하여 다른 테스트에 영향을 받지 않도록 한다!\nDynamicTest (JUnit5) 로 순서가 있는 테스트에 유용</li>\n<li>테스트 안에서 의도와 목적이 모두 드러나도록 작성\n어떠한 조건에서 //given\n무엇을 수행했을 때 // when\n어떤 결과가 // then</li>\n<li>테스트 코드로 리팩토링 대상</li>\n</ol>\n<h2 id=\"안정감과-자신감\" style=\"position:relative;\"><a href=\"#%EC%95%88%EC%A0%95%EA%B0%90%EA%B3%BC-%EC%9E%90%EC%8B%A0%EA%B0%90\" aria-label=\"안정감과 자신감 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>안정감과 자신감!!!!!!</h2>\n<p>by 배달의민족 권용근</p>","frontmatter":{"title":"[Spring Camp 2019] 무엇을, 어떻게 테스트할 것인가?","date":"April 27, 2019"}}},"pageContext":{"slug":"/seminar/2019-04-27-spring-camp-2019-session4/","previous":{"fields":{"slug":"/seminar/2019-04-27-spring-camp-2019-session5/"},"frontmatter":{"title":"[Spring Camp 2019] 당신도 할 수 있는 레거시 프로젝트 개선 이야기","category":"seminar","draft":false}},"next":{"fields":{"slug":"/seminar/2019-04-27-spring-camp-2019-session3/"},"frontmatter":{"title":"[Spring Camp 2019] 자바에서 null을 안전하게 다루는 방법","category":"seminar","draft":false}}}},"staticQueryHashes":["3128451518","521680639"]}
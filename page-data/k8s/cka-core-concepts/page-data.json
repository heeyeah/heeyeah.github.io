{"componentChunkName":"component---src-templates-blog-post-js","path":"/k8s/cka-core-concepts/","result":{"data":{"site":{"siteMetadata":{"title":"Heeye Blog","author":"heeye","siteUrl":"https://heeyeah.github.io","comment":{"disqusShortName":"","utterances":"heeyeah/heeyeah.github.io"},"sponsor":{"buyMeACoffeeId":"heeyeah"}}},"markdownRemark":{"id":"064e3e1f-27fe-5b2b-9523-2cf4df141679","excerpt":"📌Cluster Architecture  잘 보면 etcd, kube-apiserver, kube-controller-manager, kube-scheduler, kube-proxy 컴포넌트가 다 있다. flannel은 네트워크 관련인데, coredns는 뭐지?\n그리고 왜 2세트가 떠있지..? 1. ETCD 모든 클러스터 데이터를 담는 쿠버네티스 뒷단의 저장소로 사용되는 일관성·고가용성 키-값 저장소. 쿠버네티스 클러스터에서 etcd…","html":"<h2 id=\"cluster-architecture\" style=\"position:relative;\"><a href=\"#cluster-architecture\" aria-label=\"cluster architecture permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌Cluster Architecture</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABI0lEQVQY012Ry5KCMBBF+RhLxQcKirxECCThIaCycGYzNf//FXfSTcliFqnudDXn3hus4fGNJK0RXyvk4o7tPoQoO9zyFgf3auYa/kXMvb0NcPJzuKcbz+jbMJY4uik8M7OqeuQFOnnRYbk+c0/AICrhB4WpEs4hmYHrzYWFN7sAUaKQGSNJOhmyuv7Nw0tY4m76le0jihWkejCIIGnWwDkmEEZw58S88zlp1qLUTwg5QNavCRgYGLnphjerhwTUDyOkJ+XizsBSDVxXJgXt2RsfKqvQqx5N0WKQs0PNMSk+AcgV3Sk+9RSJIhey50rAlQHu7TO0aFBVT2TqiR8hYfXDFxLzQxjYjPx2dPfOGRZLb36b/w4/wNo4a9oRuX7ht9T4A1TYzOlRb/LrAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"components\"\n        title=\"components\"\n        src=\"/static/4db75108e61c2a002e862eb13bb6e677/c1b63/kubeadm-docker-ps.png\"\n        srcset=\"/static/4db75108e61c2a002e862eb13bb6e677/5a46d/kubeadm-docker-ps.png 300w,\n/static/4db75108e61c2a002e862eb13bb6e677/0a47e/kubeadm-docker-ps.png 600w,\n/static/4db75108e61c2a002e862eb13bb6e677/c1b63/kubeadm-docker-ps.png 1200w,\n/static/4db75108e61c2a002e862eb13bb6e677/d61c2/kubeadm-docker-ps.png 1800w,\n/static/4db75108e61c2a002e862eb13bb6e677/828bd/kubeadm-docker-ps.png 2310w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<blockquote>\n<p>잘 보면 etcd, kube-apiserver, kube-controller-manager, kube-scheduler, kube-proxy 컴포넌트가 다 있다. flannel은 네트워크 관련인데, coredns는 뭐지?\n그리고 왜 2세트가 떠있지..?</p>\n</blockquote>\n<h3 id=\"1-etcd\" style=\"position:relative;\"><a href=\"#1-etcd\" aria-label=\"1 etcd permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. ETCD</h3>\n<p>모든 클러스터 데이터를 담는 쿠버네티스 뒷단의 저장소로 사용되는 일관성·고가용성 키-값 저장소.</p>\n<p>쿠버네티스 클러스터에서 etcd를 뒷단의 저장소로 사용한다면, 이 데이터를 백업하는 계획은 필수!</p>\n<h3 id=\"2-kube-api-server\" style=\"position:relative;\"><a href=\"#2-kube-api-server\" aria-label=\"2 kube api server permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. kube api server</h3>\n<p>컨트롤 타워같이 cluster에 명령하는 역할</p>\n<h3 id=\"3-kube-controller-manager\" style=\"position:relative;\"><a href=\"#3-kube-controller-manager\" aria-label=\"3 kube controller manager permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. kube controller manager</h3>\n<p>pod, service, namespace 등 k8s의 리소스를 컨트롤하는 역할</p>\n<h3 id=\"4-kube-scheduler\" style=\"position:relative;\"><a href=\"#4-kube-scheduler\" aria-label=\"4 kube scheduler permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. kube scheduler</h3>\n<p>pod가 어떤 node에 떠야할지 스케줄링하는 애. 최적의 node를 선택하여 pod를 배포해주려고 하는 역할</p>\n<h3 id=\"5-kubelet\" style=\"position:relative;\"><a href=\"#5-kubelet\" aria-label=\"5 kubelet permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. kubelet</h3>\n<p>kube api server가 주는 신호(?)를 각 노드의 kubelet이 잘 받아서 처리해줌</p>\n<h3 id=\"6-kube-proxy\" style=\"position:relative;\"><a href=\"#6-kube-proxy\" aria-label=\"6 kube proxy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. kube proxy</h3>\n<p>k8s가 서로 어디 파드가 떠있는지 등 네트워킹을 하려면 필요한 역할을 kube proxy가 함. iptable이라고 지나가다 들었는데, 이게 맞는지는 모르겠음!</p>\n<h2 id=\"main-k8s-resources\" style=\"position:relative;\"><a href=\"#main-k8s-resources\" aria-label=\"main k8s resources permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌Main k8s resources</h2>\n<h3 id=\"1-pods\" style=\"position:relative;\"><a href=\"#1-pods\" aria-label=\"1 pods permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Pods</h3>\n<p>Create an NGINX Pod</p>\n<p><code class=\"language-text\">kubectl run nginx --image=nginx</code></p>\n<p>Generate POD Manifest YAML file (-o yaml). Don’t create it(—dry-run)</p>\n<p><code class=\"language-text\">kubectl run nginx --image=nginx --dry-run=client -o yaml</code></p>\n<p>Create a deployment</p>\n<p><code class=\"language-text\">kubectl create deployment --image=nginx nginx</code></p>\n<p>Generate Deployment YAML file (-o yaml). Don’t create it(—dry-run)</p>\n<p><code class=\"language-text\">kubectl create deployment --image=nginx nginx --dry-run=client -o yaml</code></p>\n<p>Generate Deployment YAML file (-o yaml). Don’t create it(—dry-run) with 4 Replicas (—replicas=4)</p>\n<p><code class=\"language-text\">kubectl create deployment --image=nginx nginx --dry-run=client -o yaml &gt; nginx-deployment.yaml</code></p>\n<p>Save it to a file, make necessary changes to the file (for example, adding more replicas) and then create the deployment.</p>\n<h3 id=\"2-replicasets\" style=\"position:relative;\"><a href=\"#2-replicasets\" aria-label=\"2 replicasets permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. ReplicaSets</h3>\n<h3 id=\"3-deployments\" style=\"position:relative;\"><a href=\"#3-deployments\" aria-label=\"3 deployments permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Deployments</h3>\n<h3 id=\"4-namespaces\" style=\"position:relative;\"><a href=\"#4-namespaces\" aria-label=\"4 namespaces permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. Namespaces</h3>\n<h3 id=\"5-services-clusterip-loadbalancer\" style=\"position:relative;\"><a href=\"#5-services-clusterip-loadbalancer\" aria-label=\"5 services clusterip loadbalancer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. Services (ClusterIP, Loadbalancer)</h3>\n<p><a href=\"#service\">tip - service파트 참고하기</a></p>\n<p><code class=\"language-text\">kubectl expose pod ...</code> 커맨드 한 줄로, pod 배포랑 서비스 expose까지 다 할 수 있음!</p>\n<h3 id=\"point-imperative-commands\" style=\"position:relative;\"><a href=\"#point-imperative-commands\" aria-label=\"point imperative commands permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>point. Imperative Commands</h3>\n<p>Declarative말고 커맨드로 생성, 배포하는 것도 할 줄 알아야 한다:)</p>\n<blockquote>\n<p>Create a pod called httpd using the image httpd:alpine in the default namespace. Next, create a service of type ClusterIP by the same name (httpd). The target port for the service should be 80.</p>\n<p><code class=\"language-text\">kubectl run httpd --image=httpd:alpine --port=80 --expose</code></p>\n</blockquote>\n<h2 id=\"certification-tip\" style=\"position:relative;\"><a href=\"#certification-tip\" aria-label=\"certification tip permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📌Certification Tip!</h2>\n<h3 id=\"kubectl-conventions-docs-참고하기-\" style=\"position:relative;\"><a href=\"#kubectl-conventions-docs-%EC%B0%B8%EA%B3%A0%ED%95%98%EA%B8%B0-\" aria-label=\"kubectl conventions docs 참고하기  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>kubectl conventions docs 참고하기 :)</h3>\n<p><a href=\"https://kubernetes.io/docs/reference/kubectl/conventions/\">https://kubernetes.io/docs/reference/kubectl/conventions/</a></p>\n<h3 id=\"사용자-설정\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%84%A4%EC%A0%95\" aria-label=\"사용자 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사용자 설정</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># .vimrc\nset et\nset ts=2\nset sw=2\nset nu\n\n# .bashrc\nalias k=&#39;kubectl&#39;\nsource &lt;(k completion bash) # auto completion enable\ncomplete -F __start_kubectl k # auto completion with command &#39;k&#39;</code></pre></div>\n<h3 id=\"축약어\" style=\"position:relative;\"><a href=\"#%EC%B6%95%EC%95%BD%EC%96%B4\" aria-label=\"축약어 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>축약어</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">pod : po\nreplicationcontroller : rc\nreplicaset : rs\ndeployment : deploy\nnamespace : ns\nservice : svc\ncertificatesigningrequest : csr\ningress : ing\nnetworkpolicies : netpol\nnode: no\npersistentvolumeclaim : pvc\npersistentvolume : pv\nserviceaccount : sa\ndaemonset : ds\n\n--namespace : -n\n--selector : -l</code></pre></div>\n<h3 id=\"certification-tips---imperative-commands-with-kubectl\" style=\"position:relative;\"><a href=\"#certification-tips---imperative-commands-with-kubectl\" aria-label=\"certification tips   imperative commands with kubectl permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Certification Tips - Imperative Commands with Kubectl</h3>\n<p>While you would be working mostly the declarative way - using definition files, imperative commands can help in getting one time tasks done quickly, as well as generate a definition template easily. This would help save considerable amount of time during your exams.</p>\n<p>Before we begin, familiarize with the two options that can come in handy while working with the below commands:</p>\n<p>—dry-run: By default as soon as the command is run, the resource will be created. If you simply want to test your command , use the —dry-run=client option. This will not create the resource, instead, tell you whether the resource can be created and if your command is right.</p>\n<p>-o yaml: This will output the resource definition in YAML format on screen.</p>\n<p>Use the above two in combination to generate a resource definition file quickly, that you can then modify and create resources as required, instead of creating the files from scratch.</p>\n<h4 id=\"pod\" style=\"position:relative;\"><a href=\"#pod\" aria-label=\"pod permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>POD</h4>\n<p>Create an NGINX Pod</p>\n<p><code class=\"language-text\">kubectl run nginx --image=nginx</code></p>\n<p>Generate POD Manifest YAML file (-o yaml). Don’t create it(—dry-run)</p>\n<p><code class=\"language-text\">kubectl run nginx --image=nginx --dry-run=client -o yaml</code></p>\n<h4 id=\"deployment\" style=\"position:relative;\"><a href=\"#deployment\" aria-label=\"deployment permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Deployment</h4>\n<p>Create a deployment</p>\n<p><code class=\"language-text\">kubectl create deployment --image=nginx nginx</code></p>\n<p>Generate Deployment YAML file (-o yaml). Don’t create it(—dry-run)</p>\n<p><code class=\"language-text\">kubectl create deployment --image=nginx nginx --dry-run=client -o yaml</code></p>\n<p>Generate Deployment with 4 Replicas</p>\n<p><code class=\"language-text\">kubectl create deployment nginx --image=nginx --replicas=4</code></p>\n<p>You can also scale a deployment using the kubectl scale command.</p>\n<p><code class=\"language-text\">kubectl scale deployment nginx --replicas=4</code></p>\n<p>Another way to do this is to save the YAML definition to a file and modify</p>\n<p><code class=\"language-text\">kubectl create deployment nginx --image=nginx --dry-run=client -o yaml &gt; nginx-deployment.yaml</code></p>\n<p>You can then update the YAML file with the replicas or any other field before creating the deployment.</p>\n<h4 id=\"service\" style=\"position:relative;\"><a href=\"#service\" aria-label=\"service permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Service</h4>\n<p>Create a Service named redis-service of type ClusterIP to expose pod redis on port 6379</p>\n<p><code class=\"language-text\">kubectl expose pod redis --port=6379 --name redis-service --dry-run=client -o yaml</code></p>\n<p>(This will automatically use the pod’s labels as selectors)</p>\n<p>Or</p>\n<p><code class=\"language-text\">kubectl create service clusterip redis --tcp=6379:6379 --dry-run=client -o yaml</code> (This will not use the pods labels as selectors, instead it will assume selectors as app=redis. You cannot pass in selectors as an option. So it does not work very well if your pod has a different label set. So generate the file and modify the selectors before creating the service)</p>\n<p>Create a Service named nginx of type NodePort to expose pod nginx’s port 80 on port 30080 on the nodes:</p>\n<p><code class=\"language-text\">kubectl expose pod nginx --type=NodePort --port=80 --name=nginx-service --dry-run=client -o yaml</code></p>\n<p>(This will automatically use the pod’s labels as selectors, but you cannot specify the node port. You have to generate a definition file and then add the node port in manually before creating the service with the pod.)</p>\n<p>Or</p>\n<p><code class=\"language-text\">kubectl create service nodeport nginx --tcp=80:80 --node-port=30080 --dry-run=client -o yaml</code></p>\n<p>(This will not use the pods labels as selectors)</p>\n<p>Both the above commands have their own challenges. While one of it cannot accept a selector the other cannot accept a node port. I would recommend going with the kubectl expose command. If you need to specify a node port, generate a definition file using the same command and manually input the nodeport before creating the service.</p>\n<p>Reference:\n<a href=\"https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands\">https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands</a></p>\n<p><a href=\"https://kubernetes.io/docs/reference/kubectl/conventions/\">https://kubernetes.io/docs/reference/kubectl/conventions/</a></p>\n<br/>\n<br/>\n<hr>\n<h3 id=\"\" style=\"position:relative;\"><a href=\"#\" aria-label=\" permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>😴</h3>\n<p>영어 강의 노트 작성하는 식이어서, 개념을 제대로 알고 싶으면 official docs를 꼭 참고할 것.</p>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<p><a href=\"https://www.udemy.com/course/certified-kubernetes-administrator-with-practice-tests/learn/lecture/16214516#content\">CKA 강의 by udemy</a></p>\n<p><a href=\"https://kubernetes.io/ko/docs/concepts/overview/components/\">k8s.io - components overview</a></p>\n<p><a href=\"https://blog.dudaji.com/kubernetes/2019/06/24/cka-acceptance-review-soonbee.html\">💡CKA 학습과정 및 후기</a></p>","frontmatter":{"title":"[CKA] Section2. Core Concepts","date":"July 26, 2021"}}},"pageContext":{"slug":"/k8s/cka-core-concepts/","previous":{"fields":{"slug":"/diary/cka-about/"},"frontmatter":{"title":"CKA 자격증 2주 준비하기","category":"diary","draft":false}},"next":{"fields":{"slug":"/k8s/cka-scheduling/"},"frontmatter":{"title":"[CKA] Section3. Scheduling","category":"k8s","draft":false}}}},"staticQueryHashes":["3128451518","521680639"]}
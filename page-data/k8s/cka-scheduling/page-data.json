{"componentChunkName":"component---src-templates-blog-post-js","path":"/k8s/cka-scheduling/","result":{"data":{"site":{"siteMetadata":{"title":"Heeye Blog","author":"heeye","siteUrl":"https://heeyeah.github.io","comment":{"disqusShortName":"","utterances":"heeyeah/heeyeah.github.io"},"sponsor":{"buyMeACoffeeId":"heeyeah"}}},"markdownRemark":{"id":"7c4ed3a2-7b85-54f5-889a-82b4811120fc","excerpt":"ğŸ“ŒScheduling 1. manual scheduling schedulerê°€ ì—†ì„ ë•Œ ë‚˜íƒ€ë‚˜ëŠ” ìƒíƒœê°’  nodeí• ë‹¹ì•ˆëœ podì— nodeNameìœ¼ë¡œ node í• ë‹¹í•˜ê¸° Delete the existing pod first. Run the below command:  To list and know the names of available nodes on the cluster:  Add the nodeName field under the spec section in the nginx.yamlâ€¦","html":"<h2 id=\"scheduling\" style=\"position:relative;\"><a href=\"#scheduling\" aria-label=\"scheduling permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ“ŒScheduling</h2>\n<h3 id=\"1-manual-scheduling\" style=\"position:relative;\"><a href=\"#1-manual-scheduling\" aria-label=\"1 manual scheduling permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. manual scheduling</h3>\n<h4 id=\"schedulerê°€-ì—†ì„-ë•Œ-ë‚˜íƒ€ë‚˜ëŠ”-ìƒíƒœê°’\" style=\"position:relative;\"><a href=\"#scheduler%EA%B0%80-%EC%97%86%EC%9D%84-%EB%95%8C-%EB%82%98%ED%83%80%EB%82%98%EB%8A%94-%EC%83%81%ED%83%9C%EA%B0%92\" aria-label=\"schedulerê°€ ì—†ì„ ë•Œ ë‚˜íƒ€ë‚˜ëŠ” ìƒíƒœê°’ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>schedulerê°€ ì—†ì„ ë•Œ ë‚˜íƒ€ë‚˜ëŠ” ìƒíƒœê°’</h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 92%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAACdElEQVQ4y5VU2W7TUBD1t7Ck6ZJmj2PHcRY7jh1nX1qVAkLiuQhQyypW0bLDA4v4skKLEIuQKr7iMDOJQ6mSFB5Gc+Obe+6ZOWeu8v3nL+zvHeDTxwN8+foDu3vfsPt5FPtHcrCeEcr1W9vIahbWzlyEV+tDyzlYjGiIRHMSS8v6OAfr5dj0UC5v3seJk1EYpgfdcJBIFjC/qGJhKUs5Q1mV3wzGF4XCKZyeS0meFMqD7dfwGwM4bheN5qrknFFFni5QNRv5goc4XaLlKlCzllwUXshMDeXJi/coln14/gC1+gCVahs1WheKPlxqQaHkSxuY1alQAnPzaTkY5AmA71C2G3LQLNaI7YoABwyZWbFcRy5fRSJVmAo0Bnz+6gPqVDIfiCdN1KnsWCIvB4Ne8h+HPVWPB3z87C0cKjOVKYlKzDCWMKXEoLTDcfjbRMCdp29gVZrI6rYo3GqvUamWKDbpwD8xTFJvAlsYpitMQ+HZB6cC3ri9g5JVh+20hVVg6klMjmMngBtX7pB6JqpeTz6wIJ3e+ohl6v8ZMmCcQNrddeplS5R23A4BGmPAo8LMCmXr5iNiZRDDrgiT1StIq2UxM4vD6mdoQnjNe+xF9qdO0xT41Bh5NhrPQ7lGjwMbu1LtyCzbxLJsN2nTGAPxBQzM7BkwTrZi5jzrw1D/lHzp6l1S2cTK6gWZW56Kbv+sTE3JasgoJtNF6S2LxRdFojr5NPnXozAumX3ouG0COSe02TYsCpfHig9fGk2ChWIw/h4AR8huXGrQa+Xew5dUUolGzxUv8gj2BuelBdaofNtpiQs8vy+TxMy557zPveQ9bgUz/Q3IP4GLSnSQDQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"components\"\n        title=\"components\"\n        src=\"/static/c9ca8d73eefc39c2786c4d0561990f16/c1b63/no-scheduler.png\"\n        srcset=\"/static/c9ca8d73eefc39c2786c4d0561990f16/5a46d/no-scheduler.png 300w,\n/static/c9ca8d73eefc39c2786c4d0561990f16/0a47e/no-scheduler.png 600w,\n/static/c9ca8d73eefc39c2786c4d0561990f16/c1b63/no-scheduler.png 1200w,\n/static/c9ca8d73eefc39c2786c4d0561990f16/ddf4f/no-scheduler.png 1624w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h4 id=\"nodeí• ë‹¹ì•ˆëœ-podì—-nodenameìœ¼ë¡œ-node-í• ë‹¹í•˜ê¸°\" style=\"position:relative;\"><a href=\"#node%ED%95%A0%EB%8B%B9%EC%95%88%EB%90%9C-pod%EC%97%90-nodename%EC%9C%BC%EB%A1%9C-node-%ED%95%A0%EB%8B%B9%ED%95%98%EA%B8%B0\" aria-label=\"nodeí• ë‹¹ì•ˆëœ podì— nodenameìœ¼ë¡œ node í• ë‹¹í•˜ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>nodeí• ë‹¹ì•ˆëœ podì— nodeNameìœ¼ë¡œ node í• ë‹¹í•˜ê¸°</h4>\n<p>Delete the existing pod first. Run the below command:</p>\n<p><code class=\"language-text\">$ kubectl delete po nginx</code></p>\n<p>To list and know the names of available nodes on the cluster:</p>\n<p><code class=\"language-text\">$ kubectl get nodes</code></p>\n<p>Add the nodeName field under the spec section in the nginx.yaml file with node01 as the value:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">---\napiVersion: v1\nkind: Pod\nmetadata:\n  name: nginx\nspec:\n  nodeName: node01\n  containers:\n  -  image: nginx\n     name: nginx</code></pre></div>\n<p>Then run the command kubectl create -f nginx.yaml to create a pod from the definition file.</p>\n<p>To check the status of a nginx pod and to know the node name:</p>\n<p><code class=\"language-text\">$ kubectl get pods -o wide</code></p>\n<br/>\n<h3 id=\"2-labels-and-selectors\" style=\"position:relative;\"><a href=\"#2-labels-and-selectors\" aria-label=\"2 labels and selectors permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Labels and Selectors</h3>\n<p>labelì„ ì§€ì •í•˜ê³  selectorë¡œ ë§¤ì¹­ì‹œí‚¤ê¸° :)</p>\n<blockquote>\n<p>labelì´ env=prodì´ê³  tier=frontendì¸ pod ë‹¤ ì¡°íšŒí•´ì£¼ì„¸ìš”!</p>\n<p><code class=\"language-text\">kubectl get po -l env=prod,tier=frontend</code></p>\n</blockquote>\n<h3 id=\"3-taints-and-tolerations\" style=\"position:relative;\"><a href=\"#3-taints-and-tolerations\" aria-label=\"3 taints and tolerations permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Taints and Tolerations</h3>\n<p>tolerationì„ íŒŒë“œì— ì§€ì •í•´ì„œ taintë¥¼ ê±´ nodeì— toleration ì¡°ê±´ì´ ë¶€í•©í•˜ì§€ ì•Šìœ¼ë©´ ì ‘ê·¼í•˜ì§€ ëª»í•˜ê²Œ í•¨.\nê·¸ëŸ¬ë‹ˆê¹Œ exceptì˜ ê°œë…ì¸ ê²ƒ ê°™ë‹¤.</p>\n<p>Aë¼ëŠ” ì¡°ê±´ì„ ê°€ì§„ podë§Œ <code class=\"language-text\">taint nodes nodeAAA A</code>í•œ <code class=\"language-text\">nodeAAA</code>ì— ë“¤ì–´ì˜¬ ìˆ˜ ìˆëŠ” ê²ƒ!</p>\n<h4 id=\"practice-test\" style=\"position:relative;\"><a href=\"#practice-test\" aria-label=\"practice test permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>practice test</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">kubectl run bee --image=nginx --restart=Never --dry-run -o yaml &gt; bee.yaml\n\nkubectl explain pod --recursive | grep -A5 tolerations</code></pre></div>\n<h3 id=\"4-node-selectors\" style=\"position:relative;\"><a href=\"#4-node-selectors\" aria-label=\"4 node selectors permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. Node Selectors</h3>\n<p>íŠ¹ì • ë…¸ë“œì— pod ë„ìš°ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©</p>\n<p>ë¼ë²¨ì€ ì´ë ‡ê²Œ ì§€ì •</p>\n<p><code class=\"language-text\">kubectl label nodes node-1 size=large</code></p>\n<p><code class=\"language-text\">kubectl label node node01 color=blue</code></p>\n<p>podì— <code class=\"language-text\">nodeSelector</code>ëŠ” <code class=\"language-text\">spec</code> ì•„ë˜ì— ìœ„ì¹˜!</p>\n<h3 id=\"5-node-affinity\" style=\"position:relative;\"><a href=\"#5-node-affinity\" aria-label=\"5 node affinity permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. Node Affinity</h3>\n<p>ë…¸ë“œ ì…€ë ‰í„°ì™€ ë¹„ìŠ·í•˜ê²Œ íŠ¹ì • ë…¸ë“œì— podë¥¼ ì§€ì •í•´ì„œ ë„ìš°ê³  ì‹¶ì€ë°, ê·¸ëŸ° ì¡°ê±´ì„ ì¡°ê¸ˆ ë” ììœ ë¡­ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ</p>\n<p> <code class=\"language-text\">requiredDuringSchedulingIgnoredDuringExecution</code> ì™€ <code class=\"language-text\">preferredDuringSchedulingIgnoredDuringExecution</code> ë¡œ ë¶€ë¥´ëŠ” ë‘ ê°€ì§€ ì¢…ë¥˜ì˜ ë…¸ë“œ ì–´í”¼ë‹ˆí‹°\nê·¸ë¦¬ê³  <code class=\"language-text\">requiredDuringSchedulingRequiredDuringExecution</code>ê¹Œì§€!</p>\n<p>DuringScheduling ìƒíƒœì™€ DuringExecution ìƒíƒœì— ë”°ë¼, ë‹¤ë¥¸ ê²ƒ ê°™ìŒ.</p>\n<p>ë”°ë¼ì„œ <code class=\"language-text\">requiredDuringSchedulingIgnoredDuringExecution</code> ì˜ ì˜ˆë¡œëŠ” â€œì¸í…” CPUê°€ ìˆëŠ” ë…¸ë“œì—ì„œë§Œ íŒŒë“œ ì‹¤í–‰â€ì´ ë  ìˆ˜ ìˆê³ , <code class=\"language-text\">preferredDuringSchedulingIgnoredDuringExecution</code> ì˜ ì˜ˆë¡œëŠ” â€œì¥ì•  ì¡°ì¹˜ ì˜ì—­ XYZì— íŒŒë“œ ì§‘í•©ì„ ì‹¤í–‰í•˜ë ¤ê³  í•˜ì§€ë§Œ, ë¶ˆê°€ëŠ¥í•˜ë‹¤ë©´ ë‹¤ë¥¸ ê³³ì—ì„œ ì¼ë¶€ë¥¼ ì‹¤í–‰í•˜ë„ë¡ í—ˆìš©â€ì´ ìˆì„ ê²ƒì´ë‹¤.</p>\n<p>ì´ë ‡ë‹¤ê³  í•©ë‹ˆë‹¤ :)</p>\n<p><em>Q. Set Node Affinity to the deployment to place the pods on node01 only.</em></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> blue\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> nginx\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> nginx\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> nginx\n        <span class=\"token key atrule\">imagePullPolicy</span><span class=\"token punctuation\">:</span> Always\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> nginx\n      <span class=\"token key atrule\">affinity</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">nodeAffinity</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">requiredDuringSchedulingIgnoredDuringExecution</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">nodeSelectorTerms</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">matchExpressions</span><span class=\"token punctuation\">:</span>\n              <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> color\n                <span class=\"token key atrule\">operator</span><span class=\"token punctuation\">:</span> In\n                <span class=\"token key atrule\">values</span><span class=\"token punctuation\">:</span>\n                <span class=\"token punctuation\">-</span> blue</code></pre></div>\n<h3 id=\"6-resource-limit\" style=\"position:relative;\"><a href=\"#6-resource-limit\" aria-label=\"6 resource limit permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. Resource limit</h3>\n<p>Q. ì–´ë–¤ ê°’ì„ ë°”ê¿”ì„œ íŒŒë“œë¥¼ ë„ìš°ì„¸ìš” ë¼ëŠ” ë¬¸ì œì—ì„œ, ì–´ë–»ê²Œ ì»¤ë§¨ë“œë¥¼ ì¹˜ëŠ”ì§€?</p>\n<p>A. ë‚˜ê°™ì€ ê²½ìš°ëŠ” kubectl edit í•˜ê³  yaml ì €ì¥í•œ ë‹¤ìŒì—, applyí•˜ëŠ” ë°©ì‹ì„ ì‚¬ìš©í•˜ëŠ”ë° ë‹¤ë¥¸ ì‚¬ëŒì€ ì–´ë–»ê²Œ í•˜ëŠ”ì§€ ê¶ê¸ˆ!</p>\n<h3 id=\"7-daemonsets\" style=\"position:relative;\"><a href=\"#7-daemonsets\" aria-label=\"7 daemonsets permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7. DaemonSets</h3>\n<p>ë…¸ë“œê°€ í´ëŸ¬ìŠ¤í„°ì— ì¶”ê°€ë˜ë©´ íŒŒë“œë„ ì¶”ê°€ë¨!</p>\n<p><strong>ìš©ë„</strong></p>\n<ul>\n<li>ëª¨ë“  ë…¸ë“œì—ì„œ í´ëŸ¬ìŠ¤í„° ìŠ¤í† ë¦¬ì§€ ë°ëª¬ ì‹¤í–‰</li>\n<li>ëª¨ë“  ë…¸ë“œì—ì„œ ë¡œê·¸ ìˆ˜ì§‘ ë°ëª¬ ì‹¤í–‰</li>\n<li>ëª¨ë“  ë…¸ë“œì—ì„œ ë…¸ë“œ ëª¨ë‹ˆí„°ë§ ë°ëª¬ ì‹¤í–‰</li>\n</ul>\n<h3 id=\"8-static-pods\" style=\"position:relative;\"><a href=\"#8-static-pods\" aria-label=\"8 static pods permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>8. Static Pods</h3>\n<ul>\n<li>ìŠ¤íƒœí‹± íŒŒë“œ ëŠ” API ì„œë²„ ì—†ì´ íŠ¹ì • ë…¸ë“œì— ìˆëŠ” kubelet ë°ëª¬ì— ì˜í•´ ì§ì ‘ ê´€ë¦¬ëœë‹¤. ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ì— ì˜í•´ ê´€ë¦¬ë˜ëŠ” íŒŒë“œ(ì˜ˆë¥¼ ë“¤ì–´ ë””í”Œë¡œì´ë¨¼íŠ¸(Deployment))ì™€ëŠ” ë‹¬ë¦¬, kubelet ì´ ê°ê°ì˜ ìŠ¤íƒœí‹± íŒŒë“œë¥¼ ê°ì‹œí•œë‹¤. (ë§Œì•½ ì‹¤íŒ¨í•  ê²½ìš° ë‹¤ì‹œ êµ¬ë™í•œë‹¤.)</li>\n<li>ìŠ¤íƒœí‹± íŒŒë“œëŠ” í•­ìƒ íŠ¹ì • ë…¸ë“œì— ìˆëŠ” í•˜ë‚˜ì˜ Kubeletì— ë§¤ì—¬ ìˆë‹¤.</li>\n<li>Kubelet ì„ ì‹œì‘í•˜ë©´, ì •ì˜ëœ ëª¨ë“  ìŠ¤íƒœí‹± íŒŒë“œê°€ ìë™ìœ¼ë¡œ ì‹œì‘ëœë‹¤</li>\n</ul>\n<p><strong>Q. What is the path of the directory holding the static pod definition files?</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">ps</span> -aux <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> kubelet\n\n$ <span class=\"token function\">cat</span> /var/lib/kubelet/config.yaml</code></pre></div>\n<p><strong>Q. static pod ì‹ë³„</strong></p>\n<p>static podë¥¼ ì¸ì§€í•˜ëŠ” ë°©ë²•ì´ kubectl get pods â€”all-namespacesì—ì„œ -controlplaneì´ ë¶™ì€ ê²ƒì´ë‹¤ (?)</p>\n<p><strong>Note</strong></p>\n<p>static podë¥¼ ë§Œë“œë ¤ë©´, kubeletì´ ì‚¬ìš©í•˜ëŠ” configìœ„ì¹˜ë¥¼ ë´ì•¼ í•˜ê³ </p>\n<p>kubeletì˜ config.yamlì—ì„œ ì–´ë”” ìœ„ì¹˜ì¸ì§€ ë””ë ‰í† ë¦¬ í™•ì¸ í›„(ì˜ˆë¥¼ ë“¤ì–´<code class=\"language-text\">/etc/kubernetes/manifests</code>)</p>\n<p>ê±°ê¸°ì— yamlíŒŒì¼ì„ ìƒì„±í•˜ë©´, static podê°€ ìë™ìœ¼ë¡œ ëœ¸!</p>\n<blockquote>\n<p>ì´ê±´ pod í•œë²ˆì— commandë¡œ ë„ìš°ê³  static pod directoryì— ê°€ì ¸ë‹¤ ë„£ëŠ” ê²ƒ!\n<code class=\"language-text\">kubectl run --restart=Never --image=busybox static-busybox --dry-run=client -o yaml --command -- sleep 1000 &gt; /etc/kubernetes/manifests/static-busybox.yaml</code></p>\n</blockquote>\n<h3 id=\"9-multiple-schedulers\" style=\"position:relative;\"><a href=\"#9-multiple-schedulers\" aria-label=\"9 multiple schedulers permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>9. Multiple Schedulers</h3>\n<p><strong>Q. multiple scheduler ë§Œë“¤ê¸°</strong></p>\n<p>kubeletì˜ configPathë¡œ ê°€ì„œ scheduler.yamlì„ ë³µì‚¬í•œ ë‹¤ìŒì—, ì›í•˜ëŠ” ê°’ìœ¼ë¡œ ë³€ê²½í›„ <code class=\"language-text\">kubectl create -f custom.yaml</code>í•´ì£¼ê¸°!</p>\n<p>leader-elect=falseì—¬ì•¼ í•˜ê³  (customì´ë‹ˆê¹Œ), portë‘ secure-port ë³€ê²½í•´ì¤˜ì•¼ í•¨!</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Pod\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">creationTimestamp</span><span class=\"token punctuation\">:</span> <span class=\"token null important\">null</span>\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">component</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>scheduler\n    <span class=\"token key atrule\">tier</span><span class=\"token punctuation\">:</span> control<span class=\"token punctuation\">-</span>plane\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>scheduler\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> kube<span class=\"token punctuation\">-</span>system\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> kube<span class=\"token punctuation\">-</span>scheduler\n    <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>authentication<span class=\"token punctuation\">-</span>kubeconfig=/etc/kubernetes/scheduler.conf\n    <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>authorization<span class=\"token punctuation\">-</span>kubeconfig=/etc/kubernetes/scheduler.conf\n    <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>bind<span class=\"token punctuation\">-</span>address=127.0.0.1\n    <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>kubeconfig=/etc/kubernetes/scheduler.conf\n    <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>leader<span class=\"token punctuation\">-</span>elect=false\n    <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>port=10282\n    <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>scheduler<span class=\"token punctuation\">-</span>name=my<span class=\"token punctuation\">-</span>scheduler\n    <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>secure<span class=\"token punctuation\">-</span>port=0\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> k8s.gcr.io/kube<span class=\"token punctuation\">-</span>scheduler<span class=\"token punctuation\">:</span>v1.20.0\n    <span class=\"token key atrule\">imagePullPolicy</span><span class=\"token punctuation\">:</span> IfNotPresent\n    <span class=\"token key atrule\">livenessProbe</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">failureThreshold</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8</span>\n      <span class=\"token key atrule\">httpGet</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">host</span><span class=\"token punctuation\">:</span> 127.0.0.1\n        <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> /healthz\n        <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10259</span>\n        <span class=\"token key atrule\">scheme</span><span class=\"token punctuation\">:</span> HTTPS\n      <span class=\"token key atrule\">initialDelaySeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10</span>\n      <span class=\"token key atrule\">periodSeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10</span>\n      <span class=\"token key atrule\">timeoutSeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">15</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> kube<span class=\"token punctuation\">-</span>scheduler\n    <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">requests</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 100m\n    <span class=\"token key atrule\">startupProbe</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">failureThreshold</span><span class=\"token punctuation\">:</span> <span class=\"token number\">24</span>\n      <span class=\"token key atrule\">httpGet</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">host</span><span class=\"token punctuation\">:</span> 127.0.0.1\n        <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> /healthz\n        <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10259</span>\n        <span class=\"token key atrule\">scheme</span><span class=\"token punctuation\">:</span> HTTPS\n      <span class=\"token key atrule\">initialDelaySeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10</span>\n      <span class=\"token key atrule\">periodSeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10</span>\n      <span class=\"token key atrule\">timeoutSeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">15</span>\n    <span class=\"token key atrule\">volumeMounts</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> /etc/kubernetes/scheduler.conf\n      <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> kubeconfig\n      <span class=\"token key atrule\">readOnly</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n  <span class=\"token key atrule\">hostNetwork</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n  <span class=\"token key atrule\">priorityClassName</span><span class=\"token punctuation\">:</span> system<span class=\"token punctuation\">-</span>node<span class=\"token punctuation\">-</span>critical\n  <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">hostPath</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> /etc/kubernetes/scheduler.conf\n      <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> FileOrCreate\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> kubeconfig\n<span class=\"token key atrule\">status</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"configuring-kubernetes-scheduler\" style=\"position:relative;\"><a href=\"#configuring-kubernetes-scheduler\" aria-label=\"configuring kubernetes scheduler permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Configuring Kubernetes Scheduler</h3>\n<p>custom schedulerë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ì€ podì˜ spec ì•„ë˜ì— <code class=\"language-text\">schedulerName</code>ì„ ë„£ì–´ì£¼ë©´ ë!</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Pod\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> annotation<span class=\"token punctuation\">-</span>default<span class=\"token punctuation\">-</span>scheduler\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> multischeduler<span class=\"token punctuation\">-</span>example\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">schedulerName</span><span class=\"token punctuation\">:</span> default<span class=\"token punctuation\">-</span>scheduler\n  <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> pod<span class=\"token punctuation\">-</span>with<span class=\"token punctuation\">-</span>default<span class=\"token punctuation\">-</span>annotation<span class=\"token punctuation\">-</span>container\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> k8s.gcr.io/pause<span class=\"token punctuation\">:</span><span class=\"token number\">2.0</span></code></pre></div>","frontmatter":{"title":"[CKA] Section3. Scheduling","date":"July 29, 2021"}}},"pageContext":{"slug":"/k8s/cka-scheduling/","previous":{"fields":{"slug":"/k8s/cka-core-concepts/"},"frontmatter":{"title":"[CKA] Section2. Core Concepts","category":"k8s","draft":false}},"next":{"fields":{"slug":"/k8s/cka-logging-and-monitoring/"},"frontmatter":{"title":"[CKA] Section4. Logging & Monitoring","category":"k8s","draft":false}}}},"staticQueryHashes":["3128451518","521680639"]}